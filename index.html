<!DOCTYPE html>
<head>
	<title>Stickies</title>

  <style type="text/css" media="screen">
    body {
      background: transparent url(images/cherry.jpg);
    }
    .sticky {
      position: absolute;
      cursor: move;
      width: 256px;
      height: 256px;
      background: transparent url(images/stickies/white.png) no-repeat;
    }
    .sticky .content {
      width: 200px;
      height: 200px;
      position: relative;
      top: 30px;
      left: 20px;
    }
    a#add {
      background: url(images/add.png) no-repeat;
      width: 100px;
      height: 100px;
      display: block;
      text-indent: -1000px;
      position: fixed;
      bottom: -10px;
      left: 5px;
      z-index: 1000;
    }
    #desk {
      overflow: hidden;
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>

</head>

<body>
<a id="add">Add</a>
<div id="desk">

</div>

<script type="text/javascript" charset="utf-8" src="js/modernizr-1.1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery-ui-1.8.custom.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery-css-transform.js"></script>
<script src="http://www.google.com/jsapi"></script>
<script type="text/javascript" charset="utf-8">

  Util = {
    randomInt: function(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
  }
  var Sticky = function() {
    this.element = $("<div></div>")
      .addClass("sticky")
      .append($("<div></div>").addClass("content"))
      .css('transform', 'rotate(' + Util.randomInt(-20, 20) + 'deg)')
      .css({left: Util.randomInt(-50, $("#desk").width() - 120)})
      .css({top: Util.randomInt(-80, $("#desk").height() - 120)})
      .draggable();
    this.setStyle(Sticky.COLORS[Util.randomInt(0,Sticky.COLORS.length-1)]);
    this.element.appendTo("#desk");
    this.setText("bla");
  }
  Sticky.COLORS = ["pink", "green", "yellow", "blue", "white"];
  Sticky.prototype = {
    setText: function(text) {
      // console.log(this.element.find(".content").html(text))
      this.element.find(".content").html(text)
    },
    
    setStyle: function(stylename) {
      console.log(this.element);
      this.element.css('background', "url(images/stickies/" + stylename + ".png)");
    }
  }
  

  $(function() {
    $("#add").click(function() {
      new Sticky();
      return false;
    })
  })
</script>

</body>
</html>
